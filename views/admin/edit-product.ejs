<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/forms.css">
    <link rel="stylesheet" href="/css/product.css">
    </head>

    <body>
        <div class="container">
            <%- include('../includes/navigation.ejs') %>
                <main>

                    <% if(errorMessage) { %> 
                        <div class="user-message user-message--error"> <% errorMessage.forEach(error => { %>
                            <%= error.msg %> <br>
                        <% }) %> </div>
                    <% } %>

                    <form class="product-form" action="<% if(editing){ %>/update-product<%}else {%>/add-product<%}%>" method="POST" enctype="multipart/form-data">
                        <div class="form-control">
                            <label for="title">Title</label>
                            <input 
                                class="<%= validationErrors.find(e => e.param==='title') ? 'invalid':'' %>"
                                type="text" name="title" id="title" value="<% if(editing || hasError){ %><%= product.title %><%}%>" autofocus>
                        </div>
                        <div class="form-control">
                            <label for="image">Image</label>
                            <input type="file" name="image" id="image">
                            <!-- <input 
                                class="<%= validationErrors.find(e => e.param==='imageUrl') ? 'invalid':'' %>"
                                type="text" id="imageUrl" value="<% if(editing || hasError){ %><%= product.imageUrl %><%}%>" name="imageUrl" id="imageUrl"> -->
                        </div>
                        <div class="form-control">
                            <label for="price">Price</label>
                            <input
                                class="<%= validationErrors.find(e => e.param==='price') ? 'invalid':'' %>" 
                                type="text" value="<% if(editing || hasError){ %><%= product.price %><%}%>" name="price" id="price">
                        </div>
                        <div class="form-control">
                            <label for="shortDesc">Description</label>
                            <textarea 
                            class="<%= validationErrors.find(e => e.param==='shortDesc') ? 'invalid':'' %>"
                            name="shortDesc" id="shortDesc" cols="30" rows="10"><% if(editing || hasError){ %><%= product.shortDesc %><%}%></textarea>
                        </div>
                        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                        <% if(editing){ %>
                            <input type="hidden" name="productId" value="<%= product._id %>">
                            <%}%>
                                <button class="btn" type="submit"><% if(editing){ %> Edit Product <%}else {%> Add Product <%} %></button>
                    </form>
                </main>
        </div>
        <%- include('../includes/footer.ejs') %>