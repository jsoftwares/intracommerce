<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Add Courses to Shopping Cart</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/skeleton.css">
    <link rel="stylesheet" href="css/custom.css">
</head>

<body>
    <header id="header" class="header">
        <div class="container">
            <div class="row">
                <div class="four columns">
                    <img src="img/logo.jpg" id="logo">
                </div>
                <div class="two columns u-pull-right">
                    <ul>
                        <li class="submenu">
                            <img src="img/cart.png" id="img-cart">
                            <div id="shopping-cart">
                                <table id="cart-content" class="u-full-width">
                                    <thead>
                                        <tr>
                                            <th>Image</th>
                                            <th>Name</th>
                                            <th>Price</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>

                                <a href="#" id="clear-cart" class="button u-full-width">Clear Cart</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </header>


    <div id="hero">
        <div class="container">
            <div class="row">
                <div class="six columns">
                    <div class="hero-content">
                        <h2>Learn Something Today</h2>
                        <p>Special Offer, any course $15</p>
                        <form action="#" id="search" method="post" class="form">
                            <input class="u-full-width" type="text" placeholder="What Do You Want To Learn? " id="search-course">
                            <input type="submit" id="submit-search-course" class="submit-search-course">
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="main-bar">
        <div class="container">
            <div class="row">
                <div class="four columns icon icon1">
                    <p>20,000 online courses <br> Learn new skills</p>
                </div>
                <div class="four columns icon icon2">
                    <p>Expert Instructors<br> Learn with different teach styles</p>
                </div>
                <div class="four columns icon icon3">
                    <p>Lifetime access <br> learn at your own pace</p>
                </div>
            </div>
        </div>

    </div>

    <div id="courses-list" class="container">
        <h1 id="heading" class="heading">Online Courses</h1>
        <% if(prods.length > 0) { %>
            <div class="row">
                <% for(let product of prods) { %>
                    <div class="four columns">
                        <div class="card">
                            <a href="/products/<%= product.id %>">
                            <img src="/<%= product.imageUrl %>" class="course-image u-full-width">
                        </a>
                            <div class="info-card">

                                <a href="/products/<%= product._id %>">
                                    <h4>
                                        <%= product.title %>
                                    </h4>
                                </a>


                                <p>Juan Pedro</p>
                                <img src="img/stars.png">
                                <p class="price">₦20000 <span class="u-pull-right ">₦<%= product.price %></span></p>
                                <!-- when you are in a loop when you pass a variable and you have an included file
                                in that loop, the variable will not get passed to that include file. With EJS, 
                            you need  to pass that variable as an object as a 2nd argument to 
                            include('path_to_included_file', {product:product}) -->
                            <% if(isAuthenticated){ %>
                                <form action="/cart" method="POST">
                                    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                    <input type="hidden" name="productId" value="<%= product._id %>">
                                    <button type="submit" class="u-full-width button-primary button input" data-id="<%= product._id %>">Add to Cart</button>
                                </form>
                            <% } %>
                            </div>
                        </div>
                        <!--.card-->
                    </div>
                    <% } %>
            </div>
            <%- include('../includes/pagination.ejs', {currentPage, prevPage, hasPrevPage, hasNextPage, nextPage, lastPage}) %>
            <% } else { %>
                <h3>No Product Founds!</h3>
                <% } %>
    </div>

    <footer id="footer" class="footer">
        <div class="container">
            <div class="row">
                <div class="four columns">
                    <nav id="primary" class="menu">
                        <a class="link" href="#">For Business</a>
                        <a class="link" href="#">Become an Instructor</a>
                        <a class="link" href="#">Mobile Applications</a>
                        <a class="link" href="#">Support</a>
                        <a class="link" href="#">Help</a>
                    </nav>
                </div>
                <div class="four columns">
                    <nav id="secondary" class="menu">
                        <a class="link" href="#">About Us</a>
                        <a class="link" href="#">Work with us</a>
                        <a class="link" href="#">Blog</a>
                    </nav>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/app.js"></script>

</body>

</html>